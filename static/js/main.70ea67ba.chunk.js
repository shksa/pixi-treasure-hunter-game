(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,n,t){e.exports=t(216)},216:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(23),o=t.n(i),l=t(24),s=t(25),p=t(27),d=t(26),h=t(28),c=t(101),u=c.default,g=(c.css,c.createGlobalStyle),v=(c.keyframes,c.ThemeProvider),w=u,m=t(104);function y(){var e=Object(m.a)(["\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n      monospace;\n  }\n\n  * {\n    position: relative;\n    box-sizing: border-box;\n    padding: 0px;\n    margin: 0px;\n  }\n"]);return y=function(){return e},e}var f,x=g(y()),b={primaryColor:"white",primaryColorInverted:"black",background:"blueviolet"},S=w.div.withConfig({displayName:"AppStyle__AppWrapper",componentId:"jbvt87-0"})(["height:100vh;width:100vw;background-color:aliceblue;"]),A=t(6),H=w.div.withConfig({displayName:"style__Page",componentId:"ofd9ij-0"})(["height:100%;width:100%;background-color:blueviolet;"]),E=w.div.withConfig({displayName:"style__PixiViewWrapper",componentId:"ofd9ij-1"})([""]),G=function(e,n){return Math.floor(Math.random()*(n-e+1))+e};!function(e){e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(f||(f={}));var W,M=function(e,n){var t=void 0;return e.x<n.x&&(e.x=n.x,t=f.left),e.y<n.y&&(e.y=n.y,t=f.top),e.x+e.width>n.width&&(e.x=n.width-e.width,t=f.right),e.y+e.height>n.height&&(e.y=n.height-e.height,t=f.bottom),t},T=function(e,n){var t,r,a,i;return!1,e.centerX=e.x+e.width/2,e.centerY=e.y+e.height/2,n.centerX=n.x+n.width/2,n.centerY=n.y+n.height/2,e.halfWidth=e.width/2,e.halfHeight=e.height/2,n.halfWidth=n.width/2,n.halfHeight=n.height/2,a=e.centerX-n.centerX,i=e.centerY-n.centerY,t=e.halfWidth+n.halfWidth,r=e.halfHeight+n.halfHeight,Math.abs(a)<t&&Math.abs(i)<r};!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight"}(W||(W={}));var D=function(e){var n={};n.value=e,n.isDown=!1,n.isUp=!0,n.press=void 0,n.release=void 0,n.downHandler=function(e){e.key===n.value&&(n.isUp&&n.press&&n.press(),n.isDown=!0,n.isUp=!1,e.preventDefault())},n.upHandler=function(e){e.key===n.value&&(n.isDown&&n.release&&n.release(),n.isDown=!1,n.isUp=!0,e.preventDefault())};var t=n.downHandler,r=n.upHandler;return document.addEventListener("keydown",t,!1),document.addEventListener("keyup",r,!1),n.unsubscribe=function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",r)},n},C={door:"door.png",treasure:"treasure.png",explorer:"explorer.png",dungeon:"dungeon.png",blob:"blob.png"},O=function(e){function n(){var e,t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(p.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(a)))).pixiLoader=A.loader,t.allSprites={},t.GAME_WIDTH=1280,t.GAME_HEIGHT=720,t.NumberOfBlobs=100,t.DungeonWallWidth=80,t.HealthBarWidth=200,t.HealthBarHeight=15,t.resize=function(){var e=Math.min(window.innerWidth/t.GAME_WIDTH,window.innerHeight/t.GAME_HEIGHT);t.pixiApp.stage.scale.x=t.pixiApp.stage.scale.y=e,t.pixiApp.renderer.resize(Math.ceil(t.GAME_WIDTH*e),Math.ceil(t.GAME_HEIGHT*e)),console.log("Resize\n  Window inner "+window.innerWidth+","+window.innerHeight+" pixel ratio "+window.devicePixelRatio+"\n  Renderer "+t.pixiApp.renderer.width+","+t.pixiApp.renderer.height+" res "+t.pixiApp.renderer.resolution+"\n  Scale "+t.pixiApp.stage.scale.x+","+t.pixiApp.stage.scale.y+"\n")},t.setupGame=function(){t.pixiApp=new A.Application({width:t.GAME_WIDTH,height:t.GAME_HEIGHT,backgroundColor:5678263,autoResize:!0,resolution:window.devicePixelRatio,antialias:!0}),t.pixiApp.renderer.view.style.position="absolute",t.pixiApp.renderer.view.style.top="0px",t.pixiApp.renderer.view.style.left="0px",t.resize(),t.pixiViewWrapperEle.appendChild(t.pixiApp.view),window.addEventListener("resize",t.resize),t.pixiLoader.add({name:"GameTextureAtlas",url:"".concat("/PixiTreasureHunter","/game-assets/pixi-treasure-hunter-game.json")}).load(t.setupGameScenes)},t.setupGameScenes=function(e,n){t.playScene=new A.Container,t.gameOverScene=new A.Container,t.gameOverScene.visible=!1,t.setupPlayGameScene(n),t.setupGameOverScene(),t.gameState=t.play,t.pixiApp.ticker.add(t.gameLoop)},t.setupPlayGameScene=function(e){t.gameTextures=e.GameTextureAtlas.textures,t.createSpriteAndAddToPlayScene(C.dungeon,0,0),t.allSprites.dungeon.width=t.GAME_WIDTH,t.allSprites.dungeon.height=t.GAME_HEIGHT,t.createSpriteAndAddToPlayScene(C.explorer),t.allSprites.explorer.x=t.DungeonWallWidth,t.allSprites.explorer.y=t.GAME_HEIGHT/2-t.allSprites.explorer.height/2,t.allSprites.explorer.vx=0,t.allSprites.explorer.vy=0,t.bindKeyboardArrowKeysToExplorerMoves(),t.createSpriteAndAddToPlayScene(C.treasure),t.allSprites.treasure.x=t.GAME_WIDTH-t.allSprites.treasure.width-t.DungeonWallWidth,t.allSprites.treasure.y=t.GAME_HEIGHT/2-t.allSprites.treasure.height/2,t.createSpriteAndAddToPlayScene(C.door,t.DungeonWallWidth,0),t.createBlobSprites(C.blob),t.createHealthBar(),t.movablePlaySceneAreaDims={x:t.DungeonWallWidth,y:20,width:t.GAME_WIDTH-t.DungeonWallWidth,height:t.GAME_HEIGHT-40},t.pixiApp.stage.addChild(t.playScene)},t.createSpriteAndAddToPlayScene=function(e,n,r){var a=new A.Sprite(t.gameTextures[e]);"number"===typeof n&&"number"===typeof r&&(a.x=n,a.y=r);var i=e.substring(0,e.length-4);t.allSprites[i]=a,t.playScene.addChild(a)},t.bindKeyboardArrowKeysToExplorerMoves=function(){var e=D(W.ArrowLeft),n=D(W.ArrowUp),r=D(W.ArrowRight),a=D(W.ArrowDown),i=t.allSprites.explorer;e.press=function(){i.vx=-5,i.vy=0},e.release=function(){r.isDown||0!==i.vy||(i.vx=0)},n.press=function(){i.vy=-5,i.vx=0},n.release=function(){a.isDown||0!==i.vx||(i.vy=0)},r.press=function(){i.vx=5,i.vy=0},r.release=function(){e.isDown||0!==i.vy||(i.vx=0)},a.press=function(){i.vy=5,i.vx=0},a.release=function(){n.isDown||0!==i.vx||(i.vy=0)}},t.createBlobSprites=function(e){var n=Array.from({length:t.NumberOfBlobs});n.forEach(function(n,r,a){var i=new A.Sprite(t.gameTextures[e]);a[r]=i}),t.allSprites.blobs=n,t.positionBlobsRandomly()},t.positionBlobsRandomly=function(){var e=t.DungeonWallWidth+100,n=1;t.allSprites.blobs.forEach(function(r,a){r.x=G(e,t.GAME_WIDTH-e),r.y=G(0,t.GAME_HEIGHT-r.height),r.vy=2*n,n*=-1,t.playScene.addChild(r)})},t.createHealthBar=function(){t.healthBarContainer=new A.Container;var e=new A.Text("Health",{fontFamily:"Futura",fontSize:t.HealthBarHeight,fill:"white"});e.position.set(0,0),t.healthBarContainer.addChild(e);var n=new A.Graphics;n.beginFill(0),n.drawRect(e.width+10,0,t.HealthBarWidth,t.HealthBarHeight),n.endFill(),t.healthBarContainer.addChild(n);var r=new A.Graphics;r.beginFill(65280),r.drawRect(e.width+10,0,t.HealthBarWidth,t.HealthBarHeight),r.endFill(),t.healthBarContainer.addChild(r);var a=t.GAME_WIDTH-t.DungeonWallWidth-t.healthBarContainer.width;t.healthBarContainer.position.set(a,4),t.healthBarContainer.outer=r,t.playScene.addChild(t.healthBarContainer)},t.setupGameOverScene=function(){var e=new A.Graphics;e.beginFill(362037),e.drawRect(0,0,t.GAME_WIDTH,t.GAME_HEIGHT),e.endFill(),t.gameOverScene.addChild(e);var n=new A.TextStyle({fontFamily:"Futura",fontSize:64,fill:"white"});t.gameOverSceneMessage=new A.Text("The End!",n),t.gameOverSceneMessage.x=t.GAME_WIDTH/2-t.gameOverSceneMessage.width/2,t.gameOverSceneMessage.y=t.GAME_HEIGHT/2-t.gameOverSceneMessage.height/2,t.gameOverScene.addChild(t.gameOverSceneMessage),t.pixiApp.stage.addChild(t.gameOverScene)},t.gameLoop=function(e){t.gameState(e)},t.play=function(e){var n=t.allSprites,r=n.blobs,a=n.explorer,i=n.treasure,o=n.door;a.x+=a.vx,a.y+=a.vy,M(a,t.movablePlaySceneAreaDims);var l=!1;r.forEach(function(e){e.y+=e.vy;var n=M(e,t.movablePlaySceneAreaDims);n!==f.top&&n!==f.bottom||(e.vy*=-1),T(a,e)&&(l=!0)}),l?(a.alpha=.5,t.healthBarContainer.outer.width-=1):a.alpha=1,T(a,i)&&(i.x=a.x+8,i.y=a.y+8),T(i,o)&&(t.gameState=t.end,t.gameOverSceneMessage.text="You won!"),t.healthBarContainer.outer.width<0&&(t.gameState=t.end,t.gameOverSceneMessage.text="You lost!")},t.end=function(e){t.playScene.visible=!1,t.gameOverScene.visible=!0},t.componentDidMount=function(){t.pixiViewWrapperEle&&t.setupGame()},t}return Object(h.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement(H,null,a.a.createElement(E,{ref:function(n){e.pixiViewWrapperEle=n}}))}}]),n}(a.a.Component),B=function(e){function n(){return Object(l.a)(this,n),Object(p.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(v,{theme:b},a.a.createElement(a.a.Fragment,null,a.a.createElement(x,null),a.a.createElement(S,null,a.a.createElement(O,null))))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[106,2,1]]]);
//# sourceMappingURL=main.70ea67ba.chunk.js.map